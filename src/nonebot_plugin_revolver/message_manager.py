# message_manager.py
import random
from typing import Dict, Any

class MessageManager:
    """æ¶ˆæ¯æ¨¡æ¿ç®¡ç†å™¨"""
    
    def __init__(self):
        self.themes = {}
        self.current_theme = "lottery"
        self.load_themes()
    
    def load_themes(self):
        """åŠ è½½æ‰€æœ‰ä¸»é¢˜æ–¹æ¡ˆ"""
        self.themes = {
            # æŠ½å¡ä¸»é¢˜
            "lottery": {
                "start_cmd": "æŠ½å¡",
                "start_aliases": ["å¼€åŒ…", "æ‹‰åŒ…", ],
                "shoot_cmd": "å•æŠ½",
                "bullet_name": "ç®€å†",
                "hit_name": "å°æ¯",
                
                "messages": {
                    "disabled_group": "å½“å‰ç¾¤èŠå·²ç¦ç”¨æ­¤æ’ä»¶ï¼Œæ— æ³•ä½¿ç”¨{}åŠŸèƒ½ã€‚",
                    "game_in_progress": "å½“å‰ç¾¤èŠå·²æœ‰è¿›è¡Œä¸­çš„æŠ½å¡ï¼Œè¯·ç­‰å¾…ç»“æŸåå†å¼€å§‹ï¼",
                    "game_start": "ğŸ° æŠ½å¡å¼€å§‹ï¼ç®€å†å·²å‡†å¤‡ï¼Œè½®åˆ°ä½ äº†ï¼",
                    "no_bullet": "å½“å‰æ²¡æœ‰ç®€å†ï¼Œè¯·å…ˆä½¿ç”¨{}æŒ‡ä»¤å‡†å¤‡ç®€å†åå†å¼€å¥–ï¼",
                    "superuser_hit": "ğŸ‰ æŠ½åˆ°{}äº†ï¼ä½†ä½ æ˜¯è¶…çº§ç”¨æˆ·ï¼Œä¸å‚ä¸æƒ©ç½šã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_with_ban": "ğŸ‰ æŠ½åˆ°è¶…å¤§æ¯äº†ï¼ ä½ å·²è¢«ç¦è¨€{}åˆ†é’Ÿã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_no_ban": "ğŸ‰ æŠ½åˆ°{}äº†ï¼ä½†å½“å‰ç¾¤èŠä¸æ”¯æŒç¦è¨€åŠŸèƒ½ã€‚æ¸¸æˆç»“æŸï¼",
                    "ban_failed": "ğŸ‰ æŠ½åˆ°{}äº†ï¼ä½†æ— æ³•ç¦è¨€ï¼Œè¯·æ£€æŸ¥æƒé™ã€‚æ¸¸æˆç»“æŸï¼",
                    "miss": "ğŸ˜… {}ï¼"
                }
            },
            # ç¾é£Ÿä¸»é¢˜
            "food": {
                "start_cmd": "è¯•æ¯’",
                "start_aliases": ["å“é‰´", "è¯•åƒ", "ç¾é£Ÿ"],
                "shoot_cmd": "å“å°",
                "bullet_name": "æ¯’ç‚¹",
                "hit_name": "ä¸­æ¯’",
                
                "messages": {
                    "disabled_group": "å½“å‰ç¾¤èŠå·²ç¦ç”¨æ­¤æ’ä»¶ï¼Œæ— æ³•ä½¿ç”¨{}åŠŸèƒ½ã€‚",
                    "game_in_progress": "å½“å‰ç¾¤èŠå·²æœ‰è¿›è¡Œä¸­çš„å“é‰´ï¼Œè¯·ç­‰å¾…ç»“æŸåå†å¼€å§‹ï¼",
                    "game_start": "ğŸ½ï¸ ç¾é£Ÿå“é‰´å¼€å§‹ï¼æ¯’ç‚¹å·²æ··å…¥ï¼Œè½®åˆ°ä½ å“å°äº†ï¼",
                    "no_bullet": "å½“å‰æ²¡æœ‰é£Ÿç‰©ï¼Œè¯·å…ˆä½¿ç”¨{}æŒ‡ä»¤å‡†å¤‡é¤ç‚¹åå†å“å°ï¼",
                    "superuser_hit": "ğŸ¤¢ ä½ {}äº†ï¼ä½†ä½ æ˜¯è¶…çº§ç”¨æˆ·ï¼Œå…ç–«æ¯’æ€§ã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_with_ban": "ğŸ¤¢ æ­å–œä½ åƒåˆ°ã€å‰§æ¯’ç¾é£Ÿã€‘ï¼ ä½ å·²è¢«ç¦è¨€{}åˆ†é’Ÿã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_no_ban": "ğŸ¤¢ ä½ {}äº†ï¼ä½†å½“å‰ç¾¤èŠä¸æ”¯æŒç¦è¨€åŠŸèƒ½ã€‚æ¸¸æˆç»“æŸï¼",
                    "ban_failed": "ğŸ¤¢ ä½ {}äº†ï¼ä½†æ— æ³•ç¦è¨€ï¼Œè¯·æ£€æŸ¥æƒé™ã€‚æ¸¸æˆç»“æŸï¼",
                    "miss": "ğŸ˜‹ çœŸå¥½åƒï¼Œæ²¡æœ‰{}ï¼Œä¸‹ä¸€ä½è¯·ç»§ç»­ï¼"
                }
            },
            
            # é­”æ³•ä¸»é¢˜
            "magic": {
                "start_cmd": "æ–½æ³•",
                "start_aliases": ["åŸå”±", "å’’æœ¯", "é­”æ³•"],
                "shoot_cmd": "é‡Šæ”¾",
                "bullet_name": "å’’æœ¯",
                "hit_name": "åå™¬",
                
                "messages": {
                    "disabled_group": "å½“å‰ç¾¤èŠå·²ç¦ç”¨æ­¤æ’ä»¶ï¼Œæ— æ³•ä½¿ç”¨{}åŠŸèƒ½ã€‚",
                    "game_in_progress": "å½“å‰ç¾¤èŠå·²æœ‰è¿›è¡Œä¸­çš„æ–½æ³•ä»ªå¼ï¼Œè¯·ç­‰å¾…ç»“æŸåå†å¼€å§‹ï¼",
                    "game_start": "âœ¨ é­”æ³•ä»ªå¼å¼€å§‹ï¼å’’æœ¯å·²å‡†å¤‡ï¼Œè½®åˆ°ä½ é‡Šæ”¾äº†ï¼",
                    "no_bullet": "å½“å‰æ²¡æœ‰å‡†å¤‡å’’æœ¯ï¼Œè¯·å…ˆä½¿ç”¨{}æŒ‡ä»¤å‡†å¤‡é­”æ³•åå†é‡Šæ”¾ï¼",
                    "superuser_hit": "ğŸ’¥ ä½ è¢«{}äº†ï¼ä½†ä½ æ˜¯å¤§æ³•å¸ˆï¼Œå…ç–«åå™¬ã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_with_ban": "ğŸ’¥ ä½ è¢«å’’æœ¯ã€é­”åŠ›åå™¬ã€‘ï¼ ä½ å·²è¢«ç¦è¨€{}åˆ†é’Ÿã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_no_ban": "ğŸ’¥ ä½ è¢«{}äº†ï¼ä½†å½“å‰ç¾¤èŠä¸æ”¯æŒç¦è¨€åŠŸèƒ½ã€‚æ¸¸æˆç»“æŸï¼",
                    "ban_failed": "ğŸ’¥ ä½ è¢«{}äº†ï¼ä½†æ— æ³•ç¦è¨€ï¼Œè¯·æ£€æŸ¥æƒé™ã€‚æ¸¸æˆç»“æŸï¼",
                    "miss": "ğŸŒŸ æ–½æ³•æˆåŠŸï¼Œæ²¡æœ‰{}ï¼Œä¸‹ä¸€ä½è¯·ç»§ç»­ï¼"
                }
            },
            
            # ç¼–ç¨‹ä¸»é¢˜
            "programming": {
                "start_cmd": "æµ‹è¯•",
                "start_aliases": ["è°ƒè¯•", "è¿è¡Œ", "æ‰§è¡Œ"],
                "shoot_cmd": "è¿è¡Œ",
                "bullet_name": "bug",
                "hit_name": "å´©æºƒ",
                
                "messages": {
                    "disabled_group": "å½“å‰ç¾¤èŠå·²ç¦ç”¨æ­¤æ’ä»¶ï¼Œæ— æ³•ä½¿ç”¨{}åŠŸèƒ½ã€‚",
                    "game_in_progress": "å½“å‰ç¾¤èŠå·²æœ‰è¿›è¡Œä¸­çš„æµ‹è¯•ï¼Œè¯·ç­‰å¾…ç»“æŸåå†å¼€å§‹ï¼",
                    "game_start": "ğŸ’» ä»£ç æµ‹è¯•å¼€å§‹ï¼bugå·²æ¤å…¥ï¼Œè½®åˆ°ä½ è¿è¡Œäº†ï¼",
                    "no_bullet": "å½“å‰æ²¡æœ‰ä»£ç ï¼Œè¯·å…ˆä½¿ç”¨{}æŒ‡ä»¤ç¼–å†™ä»£ç åå†è¿è¡Œï¼",
                    "superuser_hit": "ğŸ’€ ç³»ç»Ÿ{}äº†ï¼ä½†ä½ æ˜¯ç®¡ç†å‘˜ï¼Œå¯ä»¥æ¢å¤ã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_with_ban": "ğŸ’€ ç¨‹åºé‡åˆ°ã€è‡´å‘½é”™è¯¯ã€‘ï¼ ä½ å·²è¢«ç¦è¨€{}åˆ†é’Ÿã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_no_ban": "ğŸ’€ ç³»ç»Ÿ{}äº†ï¼ä½†å½“å‰ç¾¤èŠä¸æ”¯æŒç¦è¨€åŠŸèƒ½ã€‚æ¸¸æˆç»“æŸï¼",
                    "ban_failed": "ğŸ’€ ç³»ç»Ÿ{}äº†ï¼ä½†æ— æ³•ç¦è¨€ï¼Œè¯·æ£€æŸ¥æƒé™ã€‚æ¸¸æˆç»“æŸï¼",
                    "miss": "âœ… è¿è¡Œé€šè¿‡ï¼Œæ²¡æœ‰{}ï¼Œä¸‹ä¸€ä½è¯·ç»§ç»­ï¼"
                }
            },
            
            # å åœä¸»é¢˜
            "divination": {
                "start_cmd": "å åœ",
                "start_aliases": ["ç®—å‘½", "é¢„æµ‹", "åœå¦"],
                "shoot_cmd": "æ­æ™“",
                "bullet_name": "å‡¶ç­¾",
                "hit_name": "åº”éªŒ",
                
                "messages": {
                    "disabled_group": "å½“å‰ç¾¤èŠå·²ç¦ç”¨æ­¤æ’ä»¶ï¼Œæ— æ³•ä½¿ç”¨{}åŠŸèƒ½ã€‚",
                    "game_in_progress": "å½“å‰ç¾¤èŠå·²æœ‰è¿›è¡Œä¸­çš„å åœï¼Œè¯·ç­‰å¾…ç»“æŸåå†å¼€å§‹ï¼",
                    "game_start": "ğŸ”® å åœä»ªå¼å¼€å§‹ï¼å‡¶ç­¾å·²æ··å…¥ï¼Œè½®åˆ°ä½ æ­æ™“äº†ï¼",
                    "no_bullet": "å½“å‰æ²¡æœ‰ç­¾æ–‡ï¼Œè¯·å…ˆä½¿ç”¨{}æŒ‡ä»¤å‡†å¤‡ç­¾ç­’åå†æ­æ™“ï¼",
                    "superuser_hit": "â˜ ï¸ ç­¾æ–‡{}äº†ï¼ä½†ä½ æ˜¯å¤©å‘½ä¹‹äººï¼Œä¸å—å½±å“ã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_with_ban": "â˜ ï¸ æŠ½åˆ°ã€å¤§å‡¶ä¹‹ç­¾ã€‘ï¼ ä½ å·²è¢«ç¦è¨€{}åˆ†é’Ÿã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_no_ban": "â˜ ï¸ ç­¾æ–‡{}äº†ï¼ä½†å½“å‰ç¾¤èŠä¸æ”¯æŒç¦è¨€åŠŸèƒ½ã€‚æ¸¸æˆç»“æŸï¼",
                    "ban_failed": "â˜ ï¸ ç­¾æ–‡{}äº†ï¼ä½†æ— æ³•ç¦è¨€ï¼Œè¯·æ£€æŸ¥æƒé™ã€‚æ¸¸æˆç»“æŸï¼",
                    "miss": "ğŸ€ å‰äººå¤©ç›¸ï¼Œæ²¡æœ‰{}ï¼Œä¸‹ä¸€ä½è¯·ç»§ç»­ï¼"
                }
            },
            
            # æŠ•èµ„ä¸»é¢˜
            "investment": {
                "start_cmd": "æŠ•èµ„",
                "start_aliases": ["ä¹°å…¥", "å»ºä»“", "æ“ä½œ"],
                "shoot_cmd": "äº¤æ˜“",
                "bullet_name": "åœ°é›·è‚¡",
                "hit_name": "çˆ†ä»“",
                
                "messages": {
                    "disabled_group": "å½“å‰ç¾¤èŠå·²ç¦ç”¨æ­¤æ’ä»¶ï¼Œæ— æ³•ä½¿ç”¨{}åŠŸèƒ½ã€‚",
                    "game_in_progress": "å½“å‰ç¾¤èŠå·²æœ‰è¿›è¡Œä¸­çš„æŠ•èµ„ï¼Œè¯·ç­‰å¾…ç»“æŸåå†å¼€å§‹ï¼",
                    "game_start": "ğŸ“ˆ æŠ•èµ„æ¨¡æ‹Ÿå¼€å§‹ï¼åœ°é›·è‚¡å·²åŠ å…¥ï¼Œè½®åˆ°ä½ äº¤æ˜“äº†ï¼",
                    "no_bullet": "å½“å‰æ²¡æœ‰è‚¡ç¥¨ï¼Œè¯·å…ˆä½¿ç”¨{}æŒ‡ä»¤å»ºä»“åå†äº¤æ˜“ï¼",
                    "superuser_hit": "ğŸ“‰ ä½ {}äº†ï¼ä½†ä½ æ˜¯å¤§è‚¡ä¸œï¼Œä¸ä¼šäºæŸã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_with_ban": "ğŸ“‰ ä½ é­é‡ã€è‚¡å¸‚é»‘å¤©é¹…ã€‘ï¼ ä½ å·²è¢«ç¦è¨€{}åˆ†é’Ÿã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_no_ban": "ğŸ“‰ ä½ {}äº†ï¼ä½†å½“å‰ç¾¤èŠä¸æ”¯æŒç¦è¨€åŠŸèƒ½ã€‚æ¸¸æˆç»“æŸï¼",
                    "ban_failed": "ğŸ“‰ ä½ {}äº†ï¼ä½†æ— æ³•ç¦è¨€ï¼Œè¯·æ£€æŸ¥æƒé™ã€‚æ¸¸æˆç»“æŸï¼",
                    "miss": "ğŸ“Š äº¤æ˜“æˆåŠŸï¼Œæ²¡æœ‰{}ï¼Œä¸‹ä¸€ä½è¯·ç»§ç»­ï¼"
                }
            },
            
            # æ¢é™©ä¸»é¢˜
            "adventure": {
                "start_cmd": "æ¢é™©",
                "start_aliases": ["å†’é™©", "å¯ç¨‹", "å‡ºå‘"],
                "shoot_cmd": "å‰è¿›",
                "bullet_name": "é™·é˜±",
                "hit_name": "è§¦é›·",
                
                "messages": {
                    "disabled_group": "å½“å‰ç¾¤èŠå·²ç¦ç”¨æ­¤æ’ä»¶ï¼Œæ— æ³•ä½¿ç”¨{}åŠŸèƒ½ã€‚",
                    "game_in_progress": "å½“å‰ç¾¤èŠå·²æœ‰è¿›è¡Œä¸­çš„æ¢é™©ï¼Œè¯·ç­‰å¾…ç»“æŸåå†å¼€å§‹ï¼",
                    "game_start": "ğŸ—ºï¸ æ¢é™©å¼€å§‹ï¼é™·é˜±å·²å¸ƒç½®ï¼Œè½®åˆ°ä½ å‰è¿›äº†ï¼",
                    "no_bullet": "å½“å‰æ²¡æœ‰æ¢é™©è·¯çº¿ï¼Œè¯·å…ˆä½¿ç”¨{}æŒ‡ä»¤è§„åˆ’è·¯çº¿åå†å‰è¿›ï¼",
                    "superuser_hit": "ğŸ’£ ä½ {}äº†ï¼ä½†ä½ æ˜¯æ¢é™©å®¶ï¼Œè½»æ¾è„±é™©ã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_with_ban": "ğŸ’£ ä½ ä¸å¹¸è¸©ä¸­ã€è‡´å‘½é™·é˜±ã€‘ï¼ ä½ å·²è¢«ç¦è¨€{}åˆ†é’Ÿã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_no_ban": "ğŸ’£ ä½ {}äº†ï¼ä½†å½“å‰ç¾¤èŠä¸æ”¯æŒç¦è¨€åŠŸèƒ½ã€‚æ¸¸æˆç»“æŸï¼",
                    "ban_failed": "ğŸ’£ ä½ {}äº†ï¼ä½†æ— æ³•ç¦è¨€ï¼Œè¯·æ£€æŸ¥æƒé™ã€‚æ¸¸æˆç»“æŸï¼",
                    "miss": "ğŸš¶â€â™‚ï¸ å®‰å…¨é€šè¿‡ï¼Œæ²¡æœ‰{}ï¼Œä¸‹ä¸€ä½è¯·ç»§ç»­ï¼"
                }
            },
            
            # ç¤¾äº¤ä¸»é¢˜
            "social": {
                "start_cmd": "äº¤å‹",
                "start_aliases": ["ç¤¾äº¤", "è®¤è¯†", "åŒ¹é…"],
                "shoot_cmd": "èŠå¤©",
                "bullet_name": "é›·ç‚¹",
                "hit_name": "è¸©é›·",
                
                "messages": {
                    "disabled_group": "å½“å‰ç¾¤èŠå·²ç¦ç”¨æ­¤æ’ä»¶ï¼Œæ— æ³•ä½¿ç”¨{}åŠŸèƒ½ã€‚",
                    "game_in_progress": "å½“å‰ç¾¤èŠå·²æœ‰è¿›è¡Œä¸­çš„ç¤¾äº¤ï¼Œè¯·ç­‰å¾…ç»“æŸåå†å¼€å§‹ï¼",
                    "game_start": "ğŸ¤ ç¤¾äº¤æ¸¸æˆå¼€å§‹ï¼é›·ç‚¹å·²è®¾å®šï¼Œè½®åˆ°ä½ èŠå¤©äº†ï¼",
                    "no_bullet": "å½“å‰æ²¡æœ‰è¯é¢˜ï¼Œè¯·å…ˆä½¿ç”¨{}æŒ‡ä»¤å¼€å¯è¯é¢˜åå†èŠå¤©ï¼",
                    "superuser_hit": "ğŸ’¬ ä½ {}äº†ï¼ä½†ä½ æ˜¯ç¤¾äº¤è¾¾äººï¼Œè½»æ¾åŒ–è§£ã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_with_ban": "ğŸ’¬ ä½ ä¸å¹¸è¸©ä¸­ã€è¯é¢˜é›·åŒºã€‘ï¼ ä½ å·²è¢«ç¦è¨€{}åˆ†é’Ÿã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_no_ban": "ğŸ’¬ ä½ {}äº†ï¼ä½†å½“å‰ç¾¤èŠä¸æ”¯æŒç¦è¨€åŠŸèƒ½ã€‚æ¸¸æˆç»“æŸï¼",
                    "ban_failed": "ğŸ’¬ ä½ {}äº†ï¼ä½†æ— æ³•ç¦è¨€ï¼Œè¯·æ£€æŸ¥æƒé™ã€‚æ¸¸æˆç»“æŸï¼",
                    "miss": "ğŸ˜Š èŠå¤©æ„‰å¿«ï¼Œæ²¡æœ‰{}ï¼Œä¸‹ä¸€ä½è¯·ç»§ç»­ï¼"
                }
            },
            
            # ç«æŠ€ä¸»é¢˜
            "sports": {
                "start_cmd": "æ¯”èµ›",
                "start_aliases": ["ç«æŠ€", "å¯¹å†³", "å¯¹æˆ˜"],
                "shoot_cmd": "å‡ºæ‰‹",
                "bullet_name": "å¤±è¯¯",
                "hit_name": "çŠ¯è§„",
                
                "messages": {
                    "disabled_group": "å½“å‰ç¾¤èŠå·²ç¦ç”¨æ­¤æ’ä»¶ï¼Œæ— æ³•ä½¿ç”¨{}åŠŸèƒ½ã€‚",
                    "game_in_progress": "å½“å‰ç¾¤èŠå·²æœ‰è¿›è¡Œä¸­çš„æ¯”èµ›ï¼Œè¯·ç­‰å¾…ç»“æŸåå†å¼€å§‹ï¼",
                    "game_start": "âš½ æ¯”èµ›å¼€å§‹ï¼å¤±è¯¯å·²å‡†å¤‡ï¼Œè½®åˆ°ä½ å‡ºæ‰‹äº†ï¼",
                    "no_bullet": "å½“å‰æ²¡æœ‰æ¯”èµ›ï¼Œè¯·å…ˆä½¿ç”¨{}æŒ‡ä»¤å¼€èµ›åå†å‡ºæ‰‹ï¼",
                    "superuser_hit": "ğŸ€ ä½ {}äº†ï¼ä½†ä½ æ˜¯è£åˆ¤ï¼Œè±å…æƒ©ç½šã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_with_ban": "ğŸ€ ä½ ä¸¥é‡ã€æŠ€æœ¯çŠ¯è§„ã€‘ï¼ ä½ å·²è¢«ç¦è¨€{}åˆ†é’Ÿã€‚æ¸¸æˆç»“æŸï¼",
                    "hit_no_ban": "ğŸ€ ä½ {}äº†ï¼ä½†å½“å‰ç¾¤èŠä¸æ”¯æŒç¦è¨€åŠŸèƒ½ã€‚æ¸¸æˆç»“æŸï¼",
                    "ban_failed": "ğŸ€ ä½ {}äº†ï¼ä½†æ— æ³•ç¦è¨€ï¼Œè¯·æ£€æŸ¥æƒé™ã€‚æ¸¸æˆç»“æŸï¼",
                    "miss": "ğŸ¥‡ å®Œç¾è¡¨ç°ï¼Œæ²¡æœ‰{}ï¼Œä¸‹ä¸€ä½è¯·ç»§ç»­ï¼"
                }
            }
        }
    
    def set_theme(self, theme_name: str = "lottery"):
        """è®¾ç½®å½“å‰ä¸»é¢˜"""
        if theme_name in self.themes:
            self.current_theme = theme_name
            return True
        return False
    
    def get_current_theme(self):
        """è·å–å½“å‰ä¸»é¢˜"""
        return self.themes.get(self.current_theme, self.themes["lottery"])
    
    def get_message(self, key: str, *args) -> str:
        """è·å–æ¶ˆæ¯æ¨¡æ¿å¹¶æ ¼å¼åŒ–"""
        theme = self.get_current_theme()
        message_template = theme["messages"].get(key, "")
        
        # å¦‚æœæ¶ˆæ¯æ¨¡æ¿åŒ…å«æ ¼å¼åŒ–å ä½ç¬¦ï¼Œåˆ™è¿›è¡Œæ ¼å¼åŒ–
        if args:
            try:
                return message_template.format(*args)
            except:
                return message_template
        return message_template
    
    def get_random_theme(self):
        """éšæœºé€‰æ‹©ä¸€ä¸ªä¸»é¢˜"""
        theme_names = list(self.themes.keys())
        # ä»æ‰€æœ‰ä¸»é¢˜ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªï¼ˆä¸åŒ…æ‹¬lotteryï¼‰
        available_themes = [t for t in theme_names if t != "lottery"]
        if available_themes:
            return random.choice(available_themes)
        return "lottery"
    
    def get_all_themes(self):
        """è·å–æ‰€æœ‰ä¸»é¢˜åç§°"""
        return list(self.themes.keys())

# åˆ›å»ºå…¨å±€æ¶ˆæ¯ç®¡ç†å™¨å®ä¾‹
msg_manager = MessageManager()